## TURTLE API Document

#### [API Summarize](#api_summarize)
- [How To Use](#how_to_use)
- [Signing API Request](#signing_api_request)
- [Common Parameters](#common_parameters)
- [Response](#response)

#### [APIs](#apis)
##### [Market APIs](#market_apis)
- [Market Tickers](#market_tickers)
- [Market Lastest Trades](#market_lastest_trades)
- [Market Depth](#market_depth)
- [Market Summary(24hr)](#market_summary_24hr)

##### [Trade APIs](#trade_apis)
- [Place Order](#place_order)
- [Cancel Order](#cancel_order)
- [Cancel_All_Buy_Orders](#cancel_all_buy_orders)
- [Cancel_All_Sell_Orders](#cancel_all_sell_orders)
- [Order_Detail](#order_detail)
- [Order_Match_Detail](#order_match_detail)
- [Get_Open_Orders](#get_open_orders)
- [Get_Trade_Records](#get_trade_records)

##### [Account_APIs](#account_apis)
- [Account_Assets](#account_assets)

##### [Other_APIs](#other_apis)
- [Get_All_Symbols](#get_all_symbols)

#### [Error_Code](#error_code)

## API_Summarize

### How_To_Use
URL: https://api.turtle.com

We use query string(for GET) or request body(for POST) as the data format, and UTF-8 characters shoule be URL encoded. Note: URLEncode is the standard for http parameter transmission, and most of the httpclient has been processed automatically.
The one who want to access the open api should apply an accessKey and a corresponding secretKey.Important Note: Do not reveal your 'accessKey' and 'secretKey' to anyone. They are as important as your password.

### Signing_API_Request
You need an additional signature parameter, sign, for every request (Market request excluded).
The signature is generated by the following rules

> - 1) Sort all none-empty-value parameters using parameter name by dictionary order
> - 2) Concat the ordered parameters with '&' (value url encoded). S=k1=v1&k2=v2&k3=v3
> - 3) Calculate hash using HmacSHA256   H=hmacsha256(secretKey,S)
> - 4) Enode the hash H with Base64 encoding, and lower the result.  sign=lower(base64(H))

### Common_Parameters

|Name    | Type   | Description                         | Required | Default |                                              |
| --------- | ------ | ---------------------------- | -------- | ------ | ------------------------------------------------ |
| accessKey | string | accessKey          | Y        |        |                                                  |
| signV     | string | signature version, now is 1            | Y        | 1      |                                                  |
| ts        | string | timestamp | Y        |        | The difference of time between client and server must be less than 30 seconds |
| sign      | string | signature                             |   Y       |        |                                                  |

### Response
- Success
```
{
  "status":"ok",
  "result":{} //the response data
}
```
- Fail
```
{
  "status":"error",
  "errorCode":"100000"  //error code
}
```



## APIs

### Market_APIs

###### Market_Tickers
- `GET /api/v1/market/tickers`
- Params： None
- Resp：

```
{
  "data":[
       {  
            "open":0.044297,      // 24H: opening price
            "close":0.042178,     // closing price
            "low":0.040110,       //  the minimum  price
            "high":0.045255,      //  the maxmum  price
            "symbol":"btc_usdt",     
            "amount":2286,  
            "volume":8553680.092248
        },
       ......
  ]
}
```

###### Market_Lastest_Trades
- `GET /api/v1/market/trade`
- Params：

|Name    | Type   | Description                         | Required | Default |                                              |
|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
|symbol|string|symbol name|Y|||

- Resp：

```
{
  "data":[
     {
        "id": ,
        "price": 0.444,
        "amount": 3.4444,
        "type": "buy|sell",
        "ts": 13000098 // trade time
      },
      ...
  ]
}
```

###### Market_Depth
- `GET /api/v1/market/depth`
- Params：

|Name    | Type   | Description                         | Required | Default |                                              |
|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
|symbol|string||Y|||
|type|int|merge type, 0-not merged|Y|0||

- Resp：

```
{
    "ts" : 1422222222, //timestamp
    "bids": [ // bids orders
      [7964, 0.0678], // [price, amount]
      [7963, 0.9162],
      [7961, 0.1],
      [7960, 12.8898],
      [7958, 1.2],
      ...
    ],
    "asks": [ // ask orders
      [7979, 0.0736],
      [7980, 1.0292],
      [7981, 5.5652],
      [7986, 0.2416],
      [7990, 1.9970],
      [7995, 0.88],
      ...
    ]
  }
```

###### Market_Summary_24hr

- `GET /api/v1/market/summary`
- Params：

|Name    | Type   | Description                         | Required | Default |                                              |
|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
|symbol|string||Y|||

- Resp：

```
  {
    "amount": 4316.4346,,
    "high": 8119.00,// the maxmum price in 24hr,
    "ts": 1489464451,//update timestamp
    "low": 7875.00,//the minimum price in 24hr,
    "vol": 34497276.905760 //
  }
```

### Trade_APIs
###### Place_Order
- `POST /api/v1/order/place`
- Params：

|Name    | Type   | Description                         | Required | Default |                                              |
|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
|symbol|string||Y|||
|price|float||Y|0.0|not neccessary for market order|
|amount|float|the amount|Y|0.0|Above minimum amount|
|type|string|the order type|Y||market(Invalid) / limit / best_price|
|side|string||Y||sell / buy|


- Resp：

```
  {
    "orderId":"1234567"
  }
```

###### Cancel_Order
- `POST /api/v1/order/cancel`
- Params：

|Name    | Type   | Description                         | Required | Default |                                              |
|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
|symbol|string||Y|||
|orderId|string|the order id responsed in placing order|Y|||


- Resp：

```
  {
    "orderId":"1234567",
    "result":1 // 1-Cancel operation has been committed
  }
```
###### Cancel_All_Buy_Orders
- `POST /api/v1/order/cancelallbuy`
- Params：

|Name    | Type   | Description                         | Required | Default |                                              |
|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
|symbol|string||Y|||

- Resp：

```
  {
    "result":1 //1-Cancel operation has been committed
  }
```
###### Cancel_All_Sell_Orders
- `POST /api/v1/order/cancelallsell`
- Params：

|Name    | Type   | Description                         | Required | Default |                                              |
|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
|symbol|string||Y|||

- Resp：

```
  {
    "result":1 // 1-Cancel operation has been committed
  }
```

###### Order_Detail
- `GET /api/v1/order/detail`
- Params：

|Name    | Type   | Description                         | Required | Default |                                              |
|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
|symbol|string||Y|||
|orderId|string||Y|||

- Resp：

```
   {
    "id": "59378",
    "symbol": "eth_usdt",
    "amount": 10.1000000000,
    "price": 100.1000000000,
    "createdAt": 1494901162595, //create time
    "type": "market|limit|best_price",
    "side": "buy|sell",
    "dealedAmount": 10.1000000000, //
    "dealedAvgPrice":1.25555, //average price
    "fee": 0.0202000000, // fee
    "finishedAt": 1494901400468, //latest match time
    "state": 0 //  0:commit 1:part done 2:all done 3:canceled 4:canceling 5:market order finished 6:market order part done 7:part done canceled',
  }
```
###### Order_Match_Detail
- `GET /api/v1/order/matchdetail`
- Params：

|Name    | Type   | Description                         | Required | Default |                                              |
|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
|symbol|string||Y|||
|orderId|string||Y|||

- Resp：

```
{
  "data":[
    {
      "id": 29553, // tradeid
      "symbol": "eth_usdt",
      "side":"sell|buy",
      "price": 100.1000000000,
      "amount": 9.1155000000,
      "fee": 0.0182310000,
      "dealAt": 1494901400 //dealt time
    },
   ...
  ]
}
```
###### Get_Open_Orders
- `GET /api/v1/order/openOrders`
- Params：

|Name    | Type   | Description                         | Required | Default |                                              |
|:------:|:------:|:-----------------------:|:--------:|:------:|:----:|
| symbol | string |                 |    Y     |        |      |
|  side  | string | buy /sell /all |    F     |  all   |      |
| size  |  int   |   orders count < 500   |    F     |   30   |      |


- Resp：

```
{
  "data":[
   {
    "id": "59378",
    "symbol": "eth_usdt",
    "amount": 10.1000000000,
    "price": 100.1000000000,
    "createdAt": 1494901162595, //
    "type": "market|limit|best_price",
    "side": "buy|sell",
    "dealedAmount": 10.1000000000, //
    "dealedAvgPrice":1.25555, //
    "fee": 0.0202000000, //
    "finishedAt": 1494901400468, //
    "state": 0 // 0:commit 1:part done 2:all done 3:canceled 4:canceling 5:market order finished 6:market order part done 7:part done canceled,
   },
   ...
  ]
}
```
###### Get_Trade_Records
- `GET /api/v1/order/historyTrades`
- Params：

|Name    | Type   | Description                         | Required | Default |                                              |
|:---------:|:------:|:----------------------------------------------------:|:--------:|:------:|:----:|
|  symbol   | string |                                                |    Y     |        |      |
|   side    | string |               buy / sell / all                |    F     |  all   |      |
| startTime | string |                      start timestamp                     |          |        |      |
|  endTime  | string |                      end timestamp                      |          |        |      |
- Note： endTime-startTime < 60 days

- Resp：

```
{
  "data":[
    {
      "id": 29553, //
      "orderId":354678
      "symbol": "eth_usdt",
      "side":"sell|buy",
      "price": 100.1000000000,
      "amount": 9.1155000000,
      "fee": 0.0182310000,
      "dealAt": 1494901400 //
    },
   ...
  ]
}
```

### Account_APIs
###### Account_Assets
- `GET /api/v1/account/assets`
- Params： None
- Resp：

```
{
   "data": [
      {
        "currency": "usdt",
        "frozen": 234.0047, // locked
        "avail": 328048.119992 // available
      },
      ....
   ]
}
```
### Other_APIs
###### Get_All_Symbols
- `GET /api/v1/common/symbols`
- Params：None

- Resp：

```
{
  "data": [
    {
        "symbol":"btc_usdt"
        "coin": "btc",
        "market": "usdt",
        "pricePrecision": 2, //price precision
        "amountPrecision": 4, // amount precision
        "partition": "main|innovation" //
    },
    ...
  ]
}
```

## Error_Code

| Error Code | Description                      |     |
| ------ | ----------------------------- | --- |
| -1     | Unknown Error                      |     |
| 1000   | Bad Request                     |     |
| 1001   | Bad Parameter                     |     |
| 1002   | Invalid Signature                      |     |
| 1003   | System Busy                        |     |
| 1004   | Client Time Error                |     |
|        |                               |     |
| 2000   | Order Not Exists                    |     |
| 2001   | Symbol Not Exists                  |     |
| 2002   | Insufficient Balance                      |     |
| 2003   | price overflow                  |     |
| 2004   | amount overflow                  |     |
| 2005   | price precision overflow                  |     |
| 2006   | amount precision overflow                  |     |
| 2007   | Invalid Side Type |     |
| 2008   | Invalid Order State                  |     |
| 2009   | Invalid Order Type                  |     |
| 2010   | Refuse Placing Order                    |     |
| 2011   | Refuse Cancel Order                      |     |
| 2012   | price too low                  |     |
| 2013   | price too high                  |     |
| 2014   | best price order is not available                |     |
|        |                               |     |
| 3001   | Need Login                    |     |
| 3002   | Not Authorized                |     |
| 3003   | Invalid Fund Password                 |  May need disable the fund password first   |
